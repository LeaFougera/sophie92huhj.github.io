<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fiche R√©flexe - Les Reins</title>
  <link rel="stylesheet" href="../styles/rein1.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      background: white;
      color: #333;
      font-family: Arial, sans-serif;
      padding: 40px;
      max-width: 900px;
      margin: auto;
    }

    h1, h2 {
      text-align: center;
      color: #4a536b;
    }

    .fiche-section {
  background: #f5ebe0;
  padding: 25px;
  border-radius: 12px;
  margin-bottom: 30px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  text-align: center; /* ‚úÖ Centrage du contenu */
  color: #000000;      /* ‚úÖ Couleur texte harmonis√©e */
  font-size: 16px;     /* ‚úÖ Taille uniforme */
  line-height: 1.6;
}

.fiche-section ul {
  list-style-position: inside;
  padding-left: 0;
  margin-top: 15px;
}

.fiche-section li {
  margin: 6px 0;
}

.fiche-section h2 {
  margin-bottom: 12px;
  font-size: 20px;
  color: #4a536b;
}

    .fiche-section p {
      margin: 8px 0;
      line-height: 1.6;
    }

    .btn-group {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 40px;
    }

    .btn-group button,
    .btn-group a {
      padding: 12px 20px;
      font-size: 16px;
      background-color: #d5bdaf;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s ease;
      display: inline-flex;
      min-width: 180px;
    }

    .btn-group button:hover,
    .btn-group a:hover {
      background-color: #bfa69b;
    }

    @media print {
      .btn-group {
        display: none;
      }
    }
  </style>
</head>
<body>

  <h1>Fiche R√©flexe ‚Äì Syst√®me Urinaire</h1>
  <p style="text-align:center; margin-bottom: 30px;">
    R√©capitulatif p√©dagogique ‚Äì G√©n√©ralit√©s essentielles sur chaque organe
  </p>

  <div id="fiche-container"></div>

  <!-- üîò BOUTONS EN BAS -->
  <div class="btn-group">
    <button onclick="generatePDF()">üì• Enregistrer en PDF</button>
    <button onclick="window.print()">üñ®Ô∏è Imprimer</button>
    <a href="../pages/jeux.html"> Retour au parcours</a>
  </div>

  <script>
    const details = {
  "Rein": [
    "Filtrent le sang pour √©liminer les d√©chets et les toxines",
    "R√©gulent l‚Äô√©quilibre hydrique du corps",
    "Produisent environ 1,5 litre d‚Äôurine par jour",
    "Participent √† la r√©gulation de la pression art√©rielle",
    "Contribuent √† l‚Äô√©quilibre acido-basique",
    "Produisent certaines hormones (ex. : √©rythropo√Ø√©tine)"
  ],
  "Vessie": [
    "Organe creux et extensible, situ√© dans le bas-ventre",
    "Stocke l‚Äôurine jusqu‚Äô√† son expulsion",
    "Peut contenir environ 400 √† 600 ml d‚Äôurine",
    "Se contracte quand elle est pleine pour permettre la miction"
  ],
  "Uret√®res": [
    "Conduits d‚Äôenviron 25 √† 30 cm de long",
    "Transportent l‚Äôurine des reins √† la vessie",
    "Leur paroi musculaire permet des contractions (p√©ristaltisme)",
    "Fonctionnent m√™me en position allong√©e"
  ],
  "Ur√®tre": [
    "Canal qui permet l‚Äô√©vacuation de l‚Äôurine vers l‚Äôext√©rieur",
    "Court chez la femme (~3-4 cm), long chez l‚Äôhomme (~15-20 cm)",
    "Traverse le p√©nis chez l‚Äôhomme",
    "Contr√¥l√© par un sphincter pour retenir ou lib√©rer l‚Äôurine"
  ]
};

    const ficheContainer = document.getElementById("fiche-container");
    const organs = ["Rein", "Vessie", "Uret√®res", "Ur√®tre"];

    organs.forEach(org => {
      const bloc = document.createElement("div");
      bloc.className = "fiche-section";

      const heading = document.createElement("h2");
      heading.textContent = ` ${org}`;
      bloc.appendChild(heading);

      const list = document.createElement("ul");
list.style.marginTop = "10px";

details[org].forEach(item => {
  const li = document.createElement("li");
  li.textContent = item;
  list.appendChild(li);
});

bloc.appendChild(list);

      ficheContainer.appendChild(bloc);
    });

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFont("Helvetica", "bold");
      doc.setFontSize(18);
      doc.text("Fiche R√©flexe ‚Äì Syst√®me Urinaire", 15, 20);

      doc.setFontSize(12);
      let y = 30;

      organs.forEach(org => {
        const text = details[org];
        if (!text) return;

        doc.setFont("Helvetica", "bold");
        doc.text(` ${org}`, 15, y);
        y += 8;

        doc.setFont("Helvetica", "normal");

        // D√©coupe automatique du texte pour √©viter d√©bordement
        details[org].forEach(item => {
  const lines = doc.splitTextToSize(`- ${item}`, 180);
  lines.forEach(line => {
    doc.text(line, 20, y);
    y += 6;
  });
  y += 2;
});
        lines.forEach(line => {
          doc.text(line, 20, y);
          y += 6;
        });

        y += 8;

        if (y > 270) {
          doc.addPage();
          y = 20;
        }
      });

      doc.save("fiche-systeme-urinaire.pdf");
    }
  </script>
</body>
</html>